<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.rgb.grw.dao.EmpDaoImpl">


<select id="EmpList" resultType="EmpDto">
 SELECT EMP_NO, EMP_NAME, EMP_STATE,
    	DEP_NAME, TIER_NAME
 FROM
    EMP E
    LEFT JOIN DEP D ON E.DEP_NO = D.DEP_NO
    LEFT JOIN TIER T ON E.TIER_NO = T.TIER_NO
</select>

<insert id="empAdd">

 INSERT INTO EMP (
    EMP_NAME, 
    EMP_NO, 
    EMP_PASSWORD, 
    EMP_EMAIL, 
    DEP_NO, 
    EMP_IDNUM, 
    EMP_GENDER, 
    EMP_JOINDATE, 
    TIER_NO, 
    AUTH_NO, 
    EMP_STATE
) 
VALUES (
    #{userName}, 
    #{userNo}, 
    #{userPw}, 
    #{userEmail}, 
    (SELECT DEP_NO FROM DEP WHERE DEP_NAME = #{deptSelect}),
    #{userIdnum}, 
    #{userGender}, 
    #{userJoin}, 
    (SELECT TIER_NO FROM TIER WHERE TIER_NAME = #{userTier}),
    (SELECT AUTH_NO FROM AUTH WHERE AUTH_NAME = #{userAuth}), 
    #{userState}
)

</insert>

</mapper>
