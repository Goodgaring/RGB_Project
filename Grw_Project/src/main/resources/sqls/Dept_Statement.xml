<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.rgb.grw.dao.DeptDaoImpl">

<select id="DeptList" resultType="DeptDto">
	SELECT D.DEP_NO, D.DEP_NAME, D.DEP_STATE,
    	   E.EMP_NO, E.EMP_NAME
	FROM DEP D LEFT JOIN EMP E 
		ON D.DEP_NO = E.DEP_NO
</select>

<insert id="insertDept" parameterType="DeptDto">
<!-- 	INSERT INTO DEP -->
<!-- 	(SEQ, EMP_NO, DEP_NO, DEP_NAME) -->
<!-- 	VALUES -->
<!-- 	(seq_dep.NEXTVAL, #{EMP_NO}, #{DEP_NO}) -->


	INSERT INTO DEP (DEP_NO, DEP_NAME, DEP_STATE)
    VALUES (#{depNo}, #{depName}, 'Y')
</insert>


<select id="deptEdit" resultType="DeptDto">

SELECT DISTINCT d.DEP_NAME, DISTINCT d.DEP_NO, DISTINCT e.EMP_NAME
FROM EMP e
JOIN TIER t ON e.TIER_NO = t.TIER_NO
JOIN DEP d ON e.DEP_NO = d.DEP_NO
WHERE t.TIER_NO IN ('T001', 'T002', 'T003', 'T004');

</select>

</mapper>
